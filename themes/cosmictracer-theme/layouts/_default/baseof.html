<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0"
  />
  <title>
    {{ if .IsHome }}
      {{ .Site.Title }}
    {{ else }}
      {{ .Title }} | {{ .Site.Title }}
    {{ end }}
  </title>

  {{ partial "head.html" . }}
</head>
<body>
  <div class="main-wrapper">
    {{ partial "header.html" . }}

    <main>
      {{ block "main" . }}{{ end }}
    </main>

    {{ partial "footer.html" . }}
  </div>

  <script>
    (function () {
      const root = document.documentElement;
      const icon = document.getElementById("theme-icon");
  
      function applyTheme(theme) {
        root.setAttribute("data-theme", theme);
        localStorage.setItem("ct-theme", theme);
        icon.textContent = theme === "light" ? "ðŸŒž" : "ðŸŒ™";
      }
  
      const stored = localStorage.getItem("ct-theme");
  
      // Default: dark
      applyTheme(stored === "light" ? "light" : "dark");
  
      window.toggleTheme = function () {
        const current = root.getAttribute("data-theme");
        const next = current === "dark" ? "light" : "dark";
        applyTheme(next);
      };
    })();
  </script>
</body>
</html>
